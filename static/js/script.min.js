function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}let topButton=document.getElementById("top-button");function validateSignUpForm(){var e=document.querySelector("#signupForm"),t=e.elements.email.value,n=e.elements.username.value,a=e.elements.password.value,r=e.elements.confirmPassword.value;formElementsTypes=[e.elements.email.type,e.elements.username.type,e.elements.password.type,e.elements.confirmPassword.type],expectedTypes=["email","text","password","password"];for(let e=0;e<formElementsTypes.length;e++)if(formElementsTypes[e]!==expectedTypes[e])return alert("Unkown error occured!!"),!1;return""===t||""===n||""===a||""===r?(alert("Please fill in all the required fields."),!1):/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?n.length<3?(alert("Username must be at least 3 characters long."),!1):/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\s]/.test(n)?(alert("Username cannot contain punctuation characters or whitespaces."),!1):a===r||(alert("Password and password confirmation do not match."),!1):(alert("Please enter a valid email address."),!1)}function validateSignInForm(){var e=document.querySelector("#signinForm"),t=e.elements.username.value,e=e.elements.password.value;return""===t&&""===e?(alert("Please fill in your username and password."),!1):""===t?(alert("Please fill in your username."),!1):""===e?(alert("Please fill in your password."),!1):!/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/.test(t)||(alert("Username cannot contain punctuation characters."),!1)}function validateSubmitForm(){var e=document.querySelector("#submitForm"),t=e.elements.exposure.value,n=e.elements.houseType.value,a=e.elements.squareMeters.value,r=e.elements.rental.value,o=e.elements.bedrooms.value,i=e.elements.bathrooms.value,l=[t,n,a,r,o,i];for(let e=0;e<l.length;e++)if(""===l[e])return alert("Please fill in all the required fields."),!1;if("public"!==t&&"private"!==t)return alert("Invalid exposure value."),!1;if(!["studio","flat","maisonette","semi-detached_house","detached_house","mansion"].includes(n))return alert("Invalid house type."),!1;var s=[e.elements.squareMeters,e.elements.rental,e.elements.bedrooms,e.elements.bathrooms];for(let e=0;e<s.length;e++)if("number"!==s[e].type)return alert("Invalid number."),!1;return a<0||1e3<a?(alert("Invalid square meters"),!1):r<0||1e4<r?(alert("Invalid rental value"),!1):o<0||10<o?(alert("Invalid bedroom quantity"),!1):!(i<0||10<i)||(alert("Invalid bathroom quantity"),!1)}function enforceMinMax(e,t,n){var a=parseInt(e.value,10);isNaN(a)||a<t?e.value=t:n<a&&(e.value=n)}function handleBackspace(t,n){t.addEventListener("keydown",function(e){"Backspace"===e.key&&parseInt(t.value,10)===n&&(t.value="")})}function whitespace(e){return e.replace(/_/g," ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function createSliderFormat(){return{to:function(e){return Math.round(e)},from:function(e){return parseFloat(e)}}}var squareMetersSlider,squareMetersSnapValues,rentalSlider,rentalSnapValues,bedroomsSlider,bedroomsSnapValues,bathroomsSlider,bathroomsSnapValues;function enableUsernameEdit(){document.getElementById("usernameContainer").style.display="none",document.getElementById("editUsernameForm").style.display="block",document.getElementById("newUsername").focus()}function saveNewUsername(){return!0}function cancelUsernameEdit(){document.getElementById("usernameContainer").style.display="block",document.getElementById("editUsernameForm").style.display="none",document.getElementById("newUsername").value=""}function cursorFocus(e){var t=e.getAttribute("data-modal-id"),n=e.getAttribute("data-input-field-id");document.getElementById(t).addEventListener("shown.bs.modal",function(){document.getElementById(n).focus()})}"/submit"!==window.location.pathname&&"/edit_submission"!==window.location.pathname||(document.getElementById("squareMeters").addEventListener("input",function(){enforceMinMax(this,0,1e3)}),document.getElementById("rental").addEventListener("input",function(){enforceMinMax(this,0,1e4)}),document.getElementById("bedrooms").addEventListener("input",function(){enforceMinMax(this,0,10)}),document.getElementById("bathrooms").addEventListener("input",function(){enforceMinMax(this,0,10)}),handleBackspace(document.getElementById("bedrooms"),0),handleBackspace(document.getElementById("bathrooms"),0),handleBackspace(document.getElementById("squareMeters"),0),handleBackspace(document.getElementById("rental"),0)),"/submit"!==window.location.pathname&&"/edit_submission"!==window.location.pathname&&"/search"!==window.location.pathname||(document.getElementById("city").addEventListener("change",function(){var e=this.value;document.getElementById("municipality").innerHTML='<option value="">Select Municipality</option>',document.getElementById("region").innerHTML='<option value="">Select Region</option>',""!==e&&fetch("/get_municipalities?city="+e).then(e=>e.json()).then(e=>{const n=document.getElementById("municipality");n.innerHTML='<option value="">Select Municipality</option>',e.forEach(e=>{var t=document.createElement("option");t.value=e.municipality,t.textContent=whitespace(e.municipality),n.appendChild(t)})})}),document.getElementById("municipality").addEventListener("change",function(){var e=this.value,t=document.getElementById("city").value;document.getElementById("region").innerHTML='<option value="">Select Region</option>',""!==e&&fetch(`/get_regions?city=${t}&municipality=`+e).then(e=>e.json()).then(e=>{const n=document.getElementById("region");n.innerHTML='<option value="">Select Region</option>',e.forEach(e=>{var t=document.createElement("option");t.value=e.region,t.textContent=whitespace(e.region),n.appendChild(t)})})})),"/search"===window.location.pathname&&(squareMetersSlider=document.getElementById("squareMetersSlider"),noUiSlider.create(squareMetersSlider,{start:["0","1000"],range:{min:0,max:1e3},step:5,tooltips:!1,format:createSliderFormat()}),squareMetersSnapValues=[document.getElementById("squareMetersMinimum"),document.getElementById("squareMetersMaximum")],squareMetersSlider.noUiSlider.on("update",function(e,t){squareMetersSnapValues[t].innerHTML=e[t],document.getElementById("squareMeters").value=JSON.stringify({min:e[0],max:e[1]})}),rentalSlider=document.getElementById("rentalSlider"),noUiSlider.create(rentalSlider,{start:["0","10000"],range:{min:0,max:1e4},step:50,tooltips:!1,format:createSliderFormat()}),rentalSnapValues=[document.getElementById("rentalMinimum"),document.getElementById("rentalMaximum")],rentalSlider.noUiSlider.on("update",function(e,t){rentalSnapValues[t].innerHTML=e[t],document.getElementById("rental").value=JSON.stringify({min:e[0],max:e[1]})}),bedroomsSlider=document.getElementById("bedroomsSlider"),noUiSlider.create(bedroomsSlider,{start:["0","10"],range:{min:0,max:10},step:1,tooltips:!1,format:createSliderFormat()}),bedroomsSnapValues=[document.getElementById("bedroomsMinimum"),document.getElementById("bedroomsMaximum")],bedroomsSlider.noUiSlider.on("update",function(e,t){bedroomsSnapValues[t].innerHTML=e[t],document.getElementById("bedrooms").value=JSON.stringify({min:e[0],max:e[1]})}),bathroomsSlider=document.getElementById("bathroomsSlider"),noUiSlider.create(bathroomsSlider,{start:["0","10"],range:{min:0,max:10},step:1,tooltips:!1,format:createSliderFormat()}),bathroomsSnapValues=[document.getElementById("bathroomsMinimum"),document.getElementById("bathroomsMaximum")],bathroomsSlider.noUiSlider.on("update",function(e,t){bathroomsSnapValues[t].innerHTML=e[t],document.getElementById("bathrooms").value=JSON.stringify({min:e[0],max:e[1]})}));